import Image from "next/image";
import { buttonVariants } from "@repo/ui";
import Link from "next/link";
// import LoginModal from "../Auth/LoginModal";
import { getServerSession } from "next-auth";
import { options } from "@/app/api/auth/[...nextauth]/options";
import ProviderSelect from "./ProviderSelect";
import NavDropDown from "./NavDropDown";
import NavSearch from "./NavSerach";
import NavWallet from "./NavWallet";
import BackButton from "./BackButton";
import { logoMap } from "@/lib/constants/logomap";
import { chatSupportEnabled } from "@/lib/constants/config";

export default async function Navbar() {
  const session = await getServerSession(options);

  const sizeMap = {
    offline: "sm:w-[100px] w-[65px] relative",
  };

  const casinoName = (
    process.env.NEXT_PUBLIC_CASINO_NAME as string
  ).toLowerCase();
  return (
    <nav className="flex flex-col items-center justify-between sm:px-5 px-2 py-3 fixed w-full bg-main/90 deltinstars:bg-main z-20">
      <div className="pointer-events-none absolute inset-0  z-[1] h-[17vh] backdrop-blur-[0.0625px] [mask-image:linear-gradient(0deg,transparent_0%,#000_12.5%,#000_25%,transparent_37.5%)]"></div>
      <div className="pointer-events-none absolute inset-0  z-[2] h-[17vh] backdrop-blur-[0.125px] [mask-image:linear-gradient(0deg,transparent_12.5%,#000_25%,#000_37.5%,transparent_50%)]"></div>
      <div className="pointer-events-none absolute inset-0  z-[3] h-[17vh] backdrop-blur-[0.25px] [mask-image:linear-gradient(0deg,transparent_25%,#000_37.5%,#000_50%,transparent_62.5%)]"></div>
      <div className="pointer-events-none absolute inset-0  z-[4] h-[17vh] backdrop-blur-[0.5px] [mask-image:linear-gradient(0deg,transparent_37.5%,#000_50%,#000_62.5%,transparent_75%)]"></div>
      <div className="pointer-events-none absolute inset-0  z-[5] h-[17vh] backdrop-blur-[1px] [mask-image:linear-gradient(0deg,transparent_50%,#000_62.5%,#000_75%,transparent_87.5%)]"></div>
      <div className="pointer-events-none absolute inset-0  z-[6] h-[17vh] backdrop-blur-[2px] [mask-image:linear-gradient(0deg,transparent_62.5%,#000_75%,#000_87.5%,transparent_100%)]"></div>
      <div className="pointer-events-none absolute inset-0  z-[7] h-[17vh] backdrop-blur-[4px] [mask-image:linear-gradient(0deg,transparent_75%,#000_87.5%,#000_100%,transparent_112.5%)]"></div>

      <div className="flex items-center justify-between w-full md:px-5s z-10">
        <div className="flex items-center gap-1">
          <Link href="/" className="flex items-center gap-2">
            <BackButton />
            <Image
              alt="Logo"
              className={
                sizeMap[casinoName as keyof typeof sizeMap] || sizeMap.offline
              }
              height={10}
              src={
                logoMap[casinoName as keyof typeof logoMap] || logoMap.fallback
              }
              width={50}
            />
          </Link>
        </div>

        <div className="flex items-center gap-5">
          <NavSearch position="navbar" />
          {session?.user.id ? (
            <div className="flex items-center md:gap-10 gap-2">
              <div className="flex items-center gap-5">
                <div className="sm:flex hidden">
                  {" "}
                  <Link href="/sports" className="px-2 py-1 rounded-lg">
                    <div className="flex items-center gap-2">
                      <SportsIcon />
                      <div className="text-sm text-white">Exchange</div>
                    </div>
                  </Link>
                </div>{" "}
              </div>

              <div className="cursor-pointer hidden">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 20 23"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10.3124 22.8529C11.5632 22.8529 12.5865 21.8296 12.5865 20.5788H8.03831C8.03831 21.8296 9.06166 22.8529 10.3124 22.8529ZM17.7033 16.0306V9.77678C17.7033 6.25191 15.3155 3.40927 12.018 2.61334V1.8174C12.018 0.907754 11.2221 0.111816 10.3124 0.111816C9.40278 0.111816 8.60684 0.907754 8.60684 1.8174V2.61334C5.30938 3.40927 2.92157 6.25191 2.92157 9.77678V16.0306L0.647461 18.3047V19.4417H19.9774V18.3047L17.7033 16.0306Z"
                    fill="white"
                  />
                </svg>
              </div>

              <NavWallet />

              <div className="sm:flex hidden">
                <NavDropDown />
              </div>
            </div>
          ) : (
            <div className="flex items-center sm:gap-3 gap-2">
              {/* <LoginModal /> */}

              <Link
                href="/auth/login"
                className="sm:px-4 px-2 sm:py-2 py-1 rounded-lg text-sm"
                style={{
                  background:
                    "linear-gradient(180deg, #040B1B 0%, #808080 100%)",
                  color: "#FFFFFF",
                }}
              >
                Log In
              </Link>
            </div>
          )}
        </div>
      </div>
    </nav>
  );
}

function SportsIcon() {
  return (
    <svg
      width="21"
      height="21"
      viewBox="0 0 21 21"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M20.5304 3.50049L17.3309 6.69994L16.1023 5.45377L19.3017 2.22281C19.368 2.15098 19.4613 2.11012 19.559 2.11012C19.6567 2.11012 19.75 2.15098 19.8163 2.22281L20.5479 2.97892C20.6199 3.04778 20.6591 3.14406 20.6558 3.24362C20.6524 3.34319 20.6068 3.43661 20.5304 3.50049Z"
        fill="#783E22"
      />
      <path
        d="M13.6519 0.700101V1.75025H13.3019C13.1085 1.75025 12.9518 1.90697 12.9518 2.1003H10.8515C10.8515 1.90697 10.6948 1.75025 10.5015 1.75025H9.80138C9.60805 1.75025 9.45133 1.90697 9.45133 2.1003H7.35104C7.35104 1.90697 7.19432 1.75025 7.00099 1.75025H6.65094V0.700101C6.65094 0.506774 6.80766 0.350052 7.00099 0.350052H13.3019C13.4952 0.350052 13.6519 0.506774 13.6519 0.700101Z"
        fill="#FEC108"
      />
      <path
        d="M3.15044 9.80138C4.69706 9.80138 5.95084 8.5476 5.95084 7.00098C5.95084 5.45437 4.69706 4.20059 3.15044 4.20059C1.60383 4.20059 0.350052 5.45437 0.350052 7.00098C0.350052 8.5476 1.60383 9.80138 3.15044 9.80138Z"
        fill="#F44335"
      />
      <path
        d="M14.352 2.10029V5.7093L12.9518 7.1095V2.10029C12.9518 1.90697 13.1085 1.75024 13.3019 1.75024H14.002C14.1953 1.75024 14.352 1.90697 14.352 2.10029Z"
        fill="#FFDC00"
      />
      <path
        d="M14.352 11.1561V20.3028C14.352 20.4962 14.1953 20.6529 14.002 20.6529H13.3019C13.1085 20.6529 12.9518 20.4962 12.9518 20.3028V12.5563L14.352 11.1561Z"
        fill="#FFDC00"
      />
      <path
        d="M10.8515 2.10029V9.19929L9.45132 10.5995V2.10029C9.45132 1.90697 9.60805 1.75024 9.80137 1.75024H10.5015C10.6948 1.75024 10.8515 1.90697 10.8515 2.10029Z"
        fill="#FFDC00"
      />
      <path
        d="M10.8515 14.6566V20.3028C10.8515 20.4962 10.6948 20.6529 10.5015 20.6529H9.80137C9.60805 20.6529 9.45132 20.4962 9.45132 20.3028V16.0568L10.8515 14.6566Z"
        fill="#FFDC00"
      />
      <path
        d="M7.35103 2.10029V12.6928L5.95084 14.093V2.10029C5.95084 1.90697 6.10756 1.75024 6.30089 1.75024H7.00098C7.19431 1.75024 7.35103 1.90697 7.35103 2.10029Z"
        fill="#FFDC00"
      />
      <path
        d="M7.35103 18.157V20.3028C7.35103 20.4962 7.19431 20.6529 7.00098 20.6529H6.30089C6.10756 20.6529 5.95084 20.4962 5.95084 20.3028V19.5572L7.35103 18.157Z"
        fill="#FFDC00"
      />
      <path
        d="M5.11073 5.04071L1.19018 8.96126C0.884645 8.66859 0.651013 8.30916 0.507584 7.91112L4.03958 4.36162C4.44386 4.50309 4.81031 4.73541 5.11073 5.04071Z"
        fill="#C81E1E"
      />
      <path
        d="M5.79331 6.10136L2.25431 9.64036C1.8586 9.49392 1.50005 9.26206 1.20416 8.96126L5.11071 5.04071C5.41499 5.33853 5.64829 5.70104 5.79331 6.10136Z"
        fill="#C81E1E"
      />
      <path
        d="M17.6495 7.8586L4.96018 20.5479C4.89446 20.6141 4.80499 20.6514 4.71165 20.6514C4.61831 20.6514 4.52884 20.6141 4.46311 20.5479L2.2088 18.3146C2.12461 18.2289 2.09025 18.106 2.11779 17.989C2.15979 17.7965 1.4737 18.5876 14.9261 5.13522C15.0327 5.02744 15.1967 5.00059 15.3321 5.06871L16.1022 5.45376L17.3379 6.68943L17.723 7.45254C17.7893 7.58948 17.7596 7.75361 17.6495 7.8586Z"
        fill="#F57C00"
      />
      <path
        d="M17.0509 7.02548L4.3616 19.7148C4.29588 19.781 4.2064 19.8183 4.11307 19.8183C4.01973 19.8183 3.93026 19.781 3.86453 19.7148L2.11429 17.989C2.12846 17.9257 2.15997 17.8675 2.2053 17.821L14.9261 5.13522C15.0327 5.02744 15.1967 5.00059 15.3321 5.06871L16.1022 5.45376L16.9704 6.32188L17.1209 6.62292C17.1864 6.75822 17.1582 6.92025 17.0509 7.02548Z"
        fill="#FF9801"
      />
      <path
        d="M20.0543 1.96027C19.923 1.82881 19.7448 1.75495 19.559 1.75495C19.3732 1.75495 19.195 1.82881 19.0637 1.96027L16.0252 5.02671L15.4862 4.75717C15.2261 4.62978 14.9144 4.6757 14.7021 4.87268V2.10029C14.7021 1.71364 14.3886 1.4002 14.002 1.4002V0.700098C14.002 0.313445 13.6885 0 13.3019 0H7.00098C6.61433 0 6.30088 0.313445 6.30088 0.700098V1.4002C5.91423 1.4002 5.60079 1.71364 5.60079 2.10029V5.07571C5.01063 4.31861 4.11022 3.86841 3.15044 3.85054C1.42912 3.8947 0.044158 5.27966 0 7.00098C0.044158 8.7223 1.42912 10.1073 3.15044 10.1514C4.11022 10.1336 5.01063 9.68335 5.60079 8.92625V13.9425L1.96027 17.5725C1.69344 17.8447 1.69344 18.2804 1.96027 18.5526L4.21809 20.7859C4.34941 20.9174 4.5276 20.9912 4.71341 20.9912C4.89922 20.9912 5.07741 20.9174 5.20873 20.7859L5.60079 20.3939C5.64676 20.7446 5.94715 21.0059 6.30088 21.0029H7.00098C7.38764 21.0029 7.70108 20.6895 7.70108 20.3028V18.3006L9.10128 16.9004V20.3028C9.10128 20.6895 9.41472 21.0029 9.80138 21.0029H10.5015C10.8881 21.0029 11.2016 20.6895 11.2016 20.3028V14.8001L12.6018 13.3999V20.3028C12.6018 20.6895 12.9152 21.0029 13.3019 21.0029H14.002C14.3886 21.0029 14.7021 20.6895 14.7021 20.3028V11.2996L17.898 8.10714C18.1108 7.89359 18.1629 7.56784 18.0275 7.29852L17.758 6.75945L20.7964 3.72102C21.0679 3.44796 21.0679 3.00695 20.7964 2.73388L20.0543 1.96027ZM14.002 20.3028H13.3019V12.6998L14.002 11.9997V20.3028ZM9.80138 9.75237V2.10029H10.5015V9.05577L9.80138 9.75237ZM11.2016 2.45034H12.6018V6.95898L11.2016 8.35917V2.45034ZM14.002 2.10029V5.56228L13.3019 6.26238V2.10029H14.002ZM13.3019 1.4002C13.0533 1.4017 12.8241 1.53493 12.6998 1.75025H11.1036C10.9793 1.53493 10.7501 1.4017 10.5015 1.4002V0.700098H13.3019V1.4002ZM7.00098 0.700098H9.80138V1.4002C9.55276 1.4017 9.3236 1.53493 9.19929 1.75025H7.60307C7.47876 1.53493 7.24959 1.4017 7.00098 1.4002V0.700098ZM7.00098 2.10029V12.5458L6.30088 13.2459V2.10029H7.00098ZM1.20767 8.45018C1.09483 8.30375 0.998563 8.14526 0.920629 7.97762L4.12708 4.77117C4.29472 4.8491 4.45321 4.94537 4.59965 5.05821L1.20767 8.45018ZM5.09321 5.55178C5.20525 5.69752 5.30147 5.85476 5.38025 6.02084L2.1703 9.23079C2.00422 9.15201 1.84698 9.05579 1.70124 8.94375L5.09321 5.55178ZM3.34647 4.55064L0.700098 7.19701C0.654367 6.48211 0.918461 5.78209 1.42501 5.27555C1.93155 4.769 2.63157 4.50491 3.34647 4.55064ZM2.95091 9.45133L5.60079 6.80145C5.64768 7.51759 5.38359 8.21919 4.87612 8.72666C4.36865 9.23413 3.66705 9.49822 2.95091 9.45133ZM7.70108 2.45034H9.10128V10.449L7.70108 11.8492V2.45034ZM7.00098 20.3028H6.30088V19.7008L7.00098 19.0007V20.3028ZM10.5015 20.3028H9.80138V16.2003L10.5015 15.5002V20.3028ZM4.71166 20.3028C4.69066 20.2678 5.0092 20.5969 2.45384 18.0695C10.2354 10.3054 -9.04877 29.5406 15.1746 5.38376L15.8747 5.7338L17.0299 6.88897L17.3799 7.58906C4.23909 20.7754 4.74667 20.3028 4.71166 20.3028ZM17.3344 6.19587L16.5888 5.45026L19.5572 2.45034L20.3028 3.22395L17.3344 6.19587Z"
        fill="black"
      />
    </svg>
  );
}

function SupportIcon() {
  return (
    <svg
      width="20"
      height="20"
      viewBox="0 0 20 20"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        opacity="0.4"
        d="M5 7.5C5 4.73828 7.23828 2.5 10 2.5C12.7617 2.5 15 4.73828 15 7.5C15 8.04297 14.9141 8.56641 14.7539 9.05469C14.4297 9.62109 13.8203 10 13.125 10H12.7891C12.3555 9.25391 11.5508 8.75 10.625 8.75H9.375C7.99609 8.75 6.875 9.87109 6.875 11.25C6.875 11.3047 6.875 11.3555 6.87891 11.4062C5.73438 10.4922 5 9.08203 5 7.5Z"
        fill="white"
      />
      <path
        d="M10 1.25C6.54688 1.25 3.75 4.04688 3.75 7.5V8.125C3.75 8.46875 3.46875 8.75 3.125 8.75C2.78125 8.75 2.5 8.46875 2.5 8.125V7.5C2.5 3.35938 5.85938 0 10 0C14.1406 0 17.5 3.35938 17.5 7.5V8.125C17.5 10.543 15.543 12.5 13.125 12.5H10.625H10H9.375C8.68359 12.5 8.125 11.9414 8.125 11.25C8.125 10.5586 8.68359 10 9.375 10H10.625C11.3164 10 11.875 10.5586 11.875 11.25H13.125C14.8516 11.25 16.25 9.85156 16.25 8.125V7.5C16.25 4.04688 13.4531 1.25 10 1.25ZM6.5 13.75H13.5C16.3984 13.75 18.75 16.1016 18.75 19C18.75 19.5508 18.3008 20 17.75 20H2.25C1.69922 20 1.25 19.5508 1.25 19C1.25 16.1016 3.60156 13.75 6.5 13.75Z"
        fill="white"
      />
    </svg>
  );
}
